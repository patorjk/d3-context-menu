!function(e,t){if("object"==typeof module&&module.exports)module.exports=function(e){return e.contextMenu=t(e),e.contextMenu};else if("function"==typeof define&&define.amd){try{var n=require("d3")}catch(t){n=e.d3}n.contextMenu=t(n),define([],function(){return n.contextMenu})}else e.d3&&(e.d3.contextMenu=t(e.d3))}(this,function(e){return function(t,n){var o,l,c;return"function"==typeof n?o=n:(o=(n=n||{}).onOpen,l=n.onClose,c=n.position),function(n,i){var u=this;if(e.selectAll(".d3-context-menu").size()>0&&(e.selectAll(".d3-context-menu").remove(),l&&l(n,u,i)),e.select("body").on("click.d3-context-menu",function(){e.select("body").on("click.d3-context-menu",null),e.selectAll(".d3-context-menu").remove(),l&&l(n,u,i)}),e.selectAll(".d3-context-menu").data([1]).enter().append("div").attr("class","d3-context-menu"),e.selectAll(".d3-context-menu").on("contextmenu",function(t){e.selectAll(".d3-context-menu").remove(),e.event.preventDefault(),e.event.stopPropagation()}).append("ul").selectAll("li").data("function"==typeof t?t(n,u,i):t).enter().append("li").attr("class",function(e){var t="";return e.divider&&(t+=" is-divider"),e.disabled&&(t+=" is-disabled"),e.action||(t+=" is-header"),t}).html(function(e){return e.divider?"<hr>":(e.title||console.error("No title attribute set. Check the spelling of your options."),"string"==typeof e.title?e.title:e.title(n,u,i))}).on("click",function(t,o){t.disabled||t.action&&(e.select("body").on("click.d3-context-menu",null),t.action(n,u,i),e.selectAll(".d3-context-menu").remove(),l&&l(n,u,i))}),!o||!1!==o(n,u,i)){var d="function"==typeof c?c(n,u,i):c;e.select(".d3-context-menu").style("left",(d?d.left:e.event.pageX-2)+"px").style("top",(d?d.top:e.event.pageY-2)+"px").style("display","block"),e.event.preventDefault(),e.event.stopPropagation()}}}});
